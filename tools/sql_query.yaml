identity:
  name: sql_query
  author: elingembkq222
  label:
    en_US: SQL Query
    zh_Hans: SQL 查询
  icon: icon.svg

description:
  human:
    en_US: Execute SQL statements safely within Dify workflows.
    zh_Hans: 在 Dify 工作流中安全执行 SQL 语句。
  llm: Execute SQL statements safely within Dify workflows.

extra:
  python:
    source: tools/sql_query.py

parameters:
  - name: db_type
    type: select
    required: true
    options:
      - value: mysql
        label:
          en_US: MySQL
          zh_Hans: MySQL
      - value: oracle
        label:
          en_US: Oracle
          zh_Hans: Oracle
      - value: oracle11g
        label:
          en_US: Oracle 11g
          zh_Hans: Oracle 11g
      - value: postgresql
        label:
          en_US: PostgreSQL
          zh_Hans: PostgreSQL
      - value: mssql
        label:
          en_US: Microsoft SQL Server
          zh_Hans: Microsoft SQL Server
    default: mysql
    label:
      en_US: Database Type
      zh_Hans: 数据库类型
    human_description:
      en_US: Choose the type of database you want to query.
      zh_Hans: 选择要查询的数据库类型。
    form: llm

  - name: db_host
    type: string
    required: true
    default: localhost
    label:
      en_US: Database Host
      zh_Hans: 数据库地址
    human_description:
      en_US: The host name or IP address of the database.
      zh_Hans: 数据库主机名或 IP 地址。
    form: form

  - name: db_port
    type: number
    required: false
    label:
      en_US: Database Port
      zh_Hans: 数据库端口
    human_description:
      en_US: The port number used to connect to the database.
      zh_Hans: 数据库连接端口号。
    form: form

  - name: db_username
    type: string
    required: true
    label:
      en_US: Username
      zh_Hans: 用户名
    human_description:
      en_US: The username used for connecting to the database.
      zh_Hans: 数据库连接用户名。
    form: form

  - name: db_password
    type: secret-input
    required: true
    label:
      en_US: Password
      zh_Hans: 密码
    human_description:
      en_US: The password used for database authentication.
      zh_Hans: 数据库连接密码。
    form: form

  - name: db_name
    type: string
    required: false
    label:
      en_US: Database Name
      zh_Hans: 数据库名称
    human_description:
      en_US: The target database or schema name.
      zh_Hans: 要连接的数据库或架构名称。
    form: form

  - name: db_properties
    type: string
    required: false
    label:
      en_US: Connection Properties
      zh_Hans: 连接属性
    human_description:
      en_US: Optional properties for database connection (e.g., ssl=true).
      zh_Hans: 数据库连接的可选属性（如 ssl=true）。
    form: form

  - name: query_sql
    type: string
    required: true
    label:
      en_US: SQL Query
      zh_Hans: SQL 查询语句
    human_description:
      en_US: "Example: select * from users limit 10;"
      zh_Hans: "示例：select * from users limit 10;"
    llm_description: "SQL query statement, for example: select * from users limit 10;"
    form: llm

  - name: output_format
    type: select
    required: true
    label:
      en_US: Output Format
      zh_Hans: 输出格式
    options:
      - value: json
        label:
          en_US: JSON
          zh_Hans: JSON
      - value: markdown
        label:
          en_US: Markdown
          zh_Hans: Markdown
    default: json
    human_description:
      en_US: Choose how you want the query results to be formatted.
      zh_Hans: 选择查询结果的输出格式。
    form: llm
